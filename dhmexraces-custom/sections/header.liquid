<header class="site-header">
  <div class="header__container">
    <a href="{{ routes.root_url }}" class="header__logo">
      {% if section.settings.logo != blank %}
        <img src="{{ section.settings.logo | image_url: width: 300 }}"
             alt="DHMEXRACES"
             class="header__logo-img"
             loading="eager"
             width="{{ section.settings.logo_width }}"
             height="120">
      {% else %}
        <span class="header__logo-text">DHMEXRACES</span>
      {% endif %}
    </a>

    <nav class="header__menu" id="headerMenu">
      <a href="/" class="header__menu-link">Home</a>
      <a href="/products/inscripcion-guanajuato-2026" class="header__menu-link">Inscripciones</a>
      <a href="/pages/ranking-2026" class="header__menu-link">Ranking 2026</a>
      <a href="/pages/kit-rider" class="header__menu-link">Kit del Rider</a>
      <a href="/pages/merch-oficial" class="header__menu-link">Merch Oficial</a>
      <a href="/pages/ranking-2025" class="header__menu-link">Campeonato 2025</a>
      <a href="/pages/bases-del-sorteo" class="header__menu-link header__menu-link--rifa">
        <span class="rifa-icon">ğŸ</span>
        Sorteo FOX 40
      </a>
    </nav>

    <div class="header__icons">
      <button class="header__hamburger" id="hamburgerBtn" aria-label="Toggle menu">
        <span></span>
        <span></span>
        <span></span>
      </button>

      {% if shop.customer_accounts_enabled %}
        <a href="{{ routes.account_url }}" class="header__icon">
          {{ 'icon-account.svg' | inline_asset_content }}
        </a>
      {% endif %}

      <a href="{{ routes.cart_url }}" class="header__icon header__cart">
        {% if cart.item_count > 0 %}
          <span class="cart__count">{{ cart.item_count }}</span>
        {% endif %}
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/>
          <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
        </svg>
      </a>
    </div>
  </div>
</header>

{% unless page.handle == 'bases-del-sorteo' %}
<!-- Rifa Promo Top Bar -->
<div class="rifa-topbar">
  <a href="/pages/bases-del-sorteo" class="rifa-topbar__link">
    <div class="rifa-topbar__container">
      <div class="rifa-topbar__prize">
        <img src="https://cdn.shopify.com/s/files/1/0691/9556/3244/files/910_21_280_40_MY25_F_Orange_GripX2_Front.webp?v=1768319279" alt="FOX 40" class="rifa-topbar__fox">
      </div>
      <div class="rifa-topbar__content">
        <div class="rifa-topbar__main">
          <span class="rifa-topbar__badge">ğŸ SORTEO</span>
          <span class="rifa-topbar__title">GANA UNA <strong>FOX 40</strong></span>
          <span class="rifa-topbar__value">$50,000 MXN</span>
        </div>
        <div class="rifa-topbar__divider"></div>
        <div class="rifa-topbar__how">
          <span class="rifa-topbar__formula">1 INSCRIPCIÃ“N = 1 BOLETO</span>
          <span class="rifa-topbar__sub">AutomÃ¡tico al inscribirte</span>
        </div>
      </div>
      <div class="rifa-topbar__cta">
        <span class="rifa-topbar__btn">Ver Bases</span>
      </div>
    </div>
  </a>
</div>
<!-- Spacer for fixed elements -->
<div class="header-spacer"></div>
{% endunless %}

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const hamburger = document.getElementById('hamburgerBtn');
    const menu = document.getElementById('headerMenu');

    if (hamburger && menu) {
      hamburger.addEventListener('click', function() {
        hamburger.classList.toggle('active');
        menu.classList.toggle('active');
        document.body.classList.toggle('menu-open');
      });

      // Close menu when clicking a link
      const menuLinks = menu.querySelectorAll('.header__menu-link');
      menuLinks.forEach(link => {
        link.addEventListener('click', function() {
          hamburger.classList.remove('active');
          menu.classList.remove('active');
          document.body.classList.remove('menu-open');
        });
      });
    }
  });
</script>

{% stylesheet %}
  :root {
    --color-primary: #E42C2C;        /* Rojo DHMEX */
    --color-secondary: #0066B3;      /* Azul Shimano */
    --color-gold: #FFD700;           /* Amarillo dorado */
    --color-bg-dark: #000000;        /* Negro SCOTT */
    --color-bg-surface: #1A1A1A;     /* Gris muy oscuro */
    --color-bg-elevated: #2A2A2A;    /* Gris oscuro */
    --color-text-primary: #FFFFFF;   /* Blanco puro */
    --color-text-secondary: #A0A0A0; /* Gris claro */
    --color-border: rgba(255, 255, 255, 0.1);
    --color-border-accent: rgba(228, 44, 44, 0.3);
  }

  .site-header {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 1000;
    background: rgba(0, 0, 0, 0.95);
    backdrop-filter: blur(20px);
    border-bottom: 2px solid var(--color-primary);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.8);
    transition: all 0.3s ease;
  }

  .header__container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 1.5rem 2rem;
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: center;
    gap: 2rem;
  }

  .header__logo {
    display: flex;
    align-items: center;
    text-decoration: none;
    transition: transform 0.3s ease;
    justify-self: start;
  }

  .header__logo:hover {
    transform: scale(1.05);
  }

  .header__logo-img {
    height: auto;
    width: 100%;
    max-height: 120px;
    object-fit: contain;
  }

  .header__logo-text {
    font-size: 1.5rem;
    font-weight: 900;
    text-transform: uppercase;
    color: var(--color-text-primary);
    letter-spacing: 0.05em;
  }

  .header__menu {
    display: flex;
    align-items: center;
    gap: 2.5rem;
    justify-self: center;
  }

  .header__menu-link {
    color: var(--color-text-secondary);
    text-decoration: none;
    font-weight: 600;
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    transition: all 0.3s ease;
    position: relative;
    padding: 0.5rem 0;
  }

  .header__menu-link::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 2px;
    background: var(--color-primary);
    transition: width 0.3s ease;
  }

  .header__menu-link:hover {
    color: var(--color-text-primary);
  }

  .header__menu-link:hover::after {
    width: 100%;
  }

  /* Gold link style for 2025 */
  .header__menu-link--gold {
    color: var(--color-gold) !important;
  }

  .header__menu-link--gold:hover {
    color: #fff !important;
  }

  .header__menu-link--gold::after {
    background: var(--color-gold);
  }

  /* Rifa FOX 40 - Premium badge style */
  .header__menu-link--rifa {
    display: inline-flex !important;
    align-items: center;
    gap: 6px;
    background: linear-gradient(135deg, #FF6B00 0%, #E55A00 100%);
    color: #000 !important;
    font-weight: 800 !important;
    padding: 8px 16px !important;
    border-radius: 100px;
    font-size: 0.8rem !important;
    letter-spacing: 0.05em;
    box-shadow: 0 4px 15px rgba(255, 107, 0, 0.4);
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    animation: rifaPulse 2s ease-in-out infinite;
  }

  .header__menu-link--rifa:hover {
    color: #000 !important;
    transform: scale(1.08) translateY(-2px);
    box-shadow: 0 8px 25px rgba(255, 107, 0, 0.6);
  }

  .header__menu-link--rifa::after {
    display: none !important;
  }

  .rifa-icon {
    font-size: 1rem;
    animation: rifaShake 1.5s ease-in-out infinite;
  }

  @keyframes rifaPulse {
    0%, 100% { box-shadow: 0 4px 15px rgba(255, 107, 0, 0.4); }
    50% { box-shadow: 0 4px 20px rgba(255, 107, 0, 0.7); }
  }

  @keyframes rifaShake {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(-10deg); }
    75% { transform: rotate(10deg); }
  }

  .header__icons {
    display: flex;
    align-items: center;
    gap: 1.5rem;
    justify-self: end;
  }

  .header__icon {
    color: var(--color-text-secondary);
    text-decoration: none;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
  }

  .header__icon svg {
    width: 24px;
    height: 24px;
    fill: none;
    stroke: currentColor;
    stroke-width: 1.5;
  }

  .header__icon:hover {
    color: var(--color-primary);
    transform: translateY(-2px);
  }

  .cart__count {
    position: absolute;
    top: -8px;
    right: -8px;
    background: var(--color-primary);
    color: var(--color-text-primary);
    font-size: 0.7rem;
    font-weight: 800;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 8px rgba(228, 44, 44, 0.5);
  }

  /* Hamburger Menu */
  .header__hamburger {
    display: none;
    flex-direction: column;
    justify-content: space-between;
    width: 28px;
    height: 22px;
    background: none;
    border: none;
    cursor: pointer;
    padding: 0;
    z-index: 1001;
  }

  .header__hamburger span {
    width: 100%;
    height: 3px;
    background: var(--color-text-secondary);
    border-radius: 2px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .header__hamburger:hover span {
    background: var(--color-text-primary);
  }

  .header__hamburger.active span:nth-child(1) {
    transform: rotate(45deg) translate(7px, 7px);
    background: var(--color-primary);
  }

  .header__hamburger.active span:nth-child(2) {
    opacity: 0;
  }

  .header__hamburger.active span:nth-child(3) {
    transform: rotate(-45deg) translate(7px, -7px);
    background: var(--color-primary);
  }

  /* Mobile Styles */
  @media (max-width: 768px) {
    .header__container {
      padding: 1rem;
      grid-template-columns: 1fr auto;
    }

    .header__hamburger {
      display: flex;
      margin-right: 1rem;
    }

    .header__menu {
      position: fixed;
      top: 70px;
      left: 0;
      right: 0;
      background: var(--color-bg-dark);
      backdrop-filter: blur(30px);
      flex-direction: column;
      padding: 2.5rem 2rem;
      gap: 0;
      transform: translateY(-100%);
      opacity: 0;
      pointer-events: none;
      transition: all 0.4s ease;
      border-bottom: 2px solid var(--color-primary);
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.9);
    }

    .header__menu.active {
      transform: translateY(0);
      opacity: 1;
      pointer-events: all;
    }

    .header__menu-link {
      padding: 1.5rem 1rem;
      border-bottom: 1px solid var(--color-border);
      font-size: 1.1rem;
      text-align: center;
      color: var(--color-text-secondary);
    }

    .header__menu-link:hover {
      background: var(--color-bg-elevated);
      color: var(--color-text-primary);
    }

    .header__menu-link:last-child {
      border-bottom: none;
    }

    .header__menu-link::after {
      display: none;
    }

    .header__logo-img {
      max-height: 60px;
    }

    .header__logo-text {
      font-size: 1.1rem;
    }

    .header__icons {
      justify-self: end;
      gap: 0.5rem;
    }

    .header__icon svg {
      width: 22px;
      height: 22px;
    }
  }

  /* Prevent body scroll when menu is open */
  body.menu-open {
    overflow: hidden;
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     RIFA TOP BAR - Premium Design
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .rifa-topbar {
    background: linear-gradient(90deg, #0a0a0a 0%, #141414 50%, #0a0a0a 100%);
    border-bottom: 2px solid rgba(255, 107, 0, 0.4);
    margin-top: 85px;
    position: relative;
    overflow: hidden;
  }

  .rifa-topbar::before {
    content: '';
    position: absolute;
    inset: 0;
    background:
      radial-gradient(ellipse 50% 100% at 20% 50%, rgba(255, 107, 0, 0.08) 0%, transparent 70%),
      radial-gradient(ellipse 50% 100% at 80% 50%, rgba(255, 107, 0, 0.08) 0%, transparent 70%);
    pointer-events: none;
  }

  .rifa-topbar__link {
    display: block;
    text-decoration: none;
    padding: 12px 20px;
    transition: all 0.3s ease;
  }

  .rifa-topbar__link:hover {
    background: rgba(255, 107, 0, 0.06);
  }

  .rifa-topbar__container {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 30px;
  }

  .rifa-topbar__prize {
    flex-shrink: 0;
    position: relative;
  }

  .rifa-topbar__fox {
    height: 55px;
    width: auto;
    filter: drop-shadow(0 4px 15px rgba(255, 107, 0, 0.5));
    animation: topbarFoxFloat 3s ease-in-out infinite;
  }

  @keyframes topbarFoxFloat {
    0%, 100% { transform: translateY(0) rotate(-3deg); }
    50% { transform: translateY(-6px) rotate(3deg); }
  }

  .rifa-topbar__content {
    display: flex;
    align-items: center;
    gap: 24px;
  }

  .rifa-topbar__main {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .rifa-topbar__badge {
    background: rgba(255, 107, 0, 0.15);
    border: 1px solid rgba(255, 107, 0, 0.4);
    color: #FF6B00;
    font-size: 0.65rem;
    font-weight: 700;
    padding: 5px 10px;
    border-radius: 100px;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    white-space: nowrap;
  }

  .rifa-topbar__title {
    font-size: 0.95rem;
    color: rgba(255, 255, 255, 0.9);
    font-weight: 600;
    white-space: nowrap;
  }

  .rifa-topbar__title strong {
    color: #fff;
    font-weight: 800;
  }

  .rifa-topbar__value {
    background: linear-gradient(135deg, #FF6B00 0%, #FF8C33 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-size: 0.85rem;
    font-weight: 900;
    white-space: nowrap;
  }

  .rifa-topbar__divider {
    width: 1px;
    height: 30px;
    background: rgba(255, 255, 255, 0.15);
  }

  .rifa-topbar__how {
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  .rifa-topbar__formula {
    font-size: 0.8rem;
    font-weight: 800;
    color: #fff;
    text-transform: uppercase;
    letter-spacing: 0.03em;
    white-space: nowrap;
  }

  .rifa-topbar__sub {
    font-size: 0.65rem;
    color: rgba(255, 255, 255, 0.5);
    white-space: nowrap;
  }

  .rifa-topbar__cta {
    flex-shrink: 0;
  }

  .rifa-topbar__btn {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background: linear-gradient(135deg, #FF6B00 0%, #E55A00 100%);
    color: #000;
    font-size: 0.7rem;
    font-weight: 800;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    padding: 10px 18px;
    border-radius: 100px;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(255, 107, 0, 0.3);
  }

  .rifa-topbar__link:hover .rifa-topbar__btn {
    transform: scale(1.05);
    box-shadow: 0 6px 20px rgba(255, 107, 0, 0.5);
  }

  @media (max-width: 900px) {
    .rifa-topbar {
      margin-top: 70px;
    }

    .rifa-topbar__container {
      gap: 16px;
    }

    .rifa-topbar__fox {
      height: 45px;
    }

    .rifa-topbar__content {
      gap: 16px;
    }

    .rifa-topbar__main {
      gap: 8px;
    }

    .rifa-topbar__title {
      font-size: 0.85rem;
    }

    .rifa-topbar__value {
      display: none;
    }

    .rifa-topbar__btn {
      padding: 8px 14px;
      font-size: 0.65rem;
    }
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     MOBILE PREMIUM DESIGN - With FOX image
     â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  /* Spacer for mobile fixed header + banner */
  .header-spacer {
    display: none;
  }

  @media (max-width: 650px) {
    .header-spacer {
      display: block;
      height: 108px;
    }

    .rifa-topbar {
      position: fixed !important;
      top: 52px !important;
      left: 0 !important;
      right: 0 !important;
      z-index: 999 !important;
      margin-top: 0 !important;
      background: #000 !important;
      border-top: none !important;
      border-bottom: 2px solid #FF6B00 !important;
    }

    .rifa-topbar__link {
      padding: 16px;
    }

    .rifa-topbar__container {
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    /* FOX image on the left - diagonal style */
    .rifa-topbar__prize {
      flex-shrink: 0;
    }

    .rifa-topbar__fox {
      height: 65px !important;
      width: auto !important;
      transform: rotate(-12deg);
      filter: drop-shadow(0 0 12px rgba(255, 107, 0, 0.6));
      animation: foxDiagonalFloat 3s ease-in-out infinite;
    }

    @keyframes foxDiagonalFloat {
      0%, 100% { transform: rotate(-15deg) translateY(0); }
      50% { transform: rotate(-12deg) translateY(-4px); }
    }

    /* Center content */
    .rifa-topbar__content {
      flex: 1;
      flex-direction: column;
      align-items: center;
      gap: 2px;
      min-width: 0;
    }

    .rifa-topbar__main {
      display: flex;
      flex-direction: row;
      align-items: center;
      justify-content: center;
      gap: 6px;
    }

    .rifa-topbar__badge {
      display: none;
    }

    .rifa-topbar__title {
      font-size: 0.8rem;
      color: #fff;
      font-weight: 700;
      white-space: nowrap;
    }

    .rifa-topbar__title strong {
      color: #FF6B00;
    }

    .rifa-topbar__value {
      display: inline-block;
      font-size: 0.7rem;
      font-weight: 900;
    }

    .rifa-topbar__divider {
      display: none;
    }

    .rifa-topbar__how {
      display: block;
    }

    .rifa-topbar__formula {
      font-size: 0.55rem;
      font-weight: 700;
      color: rgba(255, 255, 255, 0.5);
      text-transform: uppercase;
    }

    .rifa-topbar__sub {
      display: none;
    }

    /* CTA button on the right */
    .rifa-topbar__cta {
      flex-shrink: 0;
    }

    .rifa-topbar__btn {
      padding: 8px 12px;
      font-size: 0.6rem;
      box-shadow: 0 0 12px rgba(255, 107, 0, 0.4);
      animation: mobileCtaPulse 2s ease-in-out infinite;
    }

    @keyframes mobileCtaPulse {
      0%, 100% { box-shadow: 0 0 10px rgba(255, 107, 0, 0.3); }
      50% { box-shadow: 0 0 18px rgba(255, 107, 0, 0.5); }
    }
  }

  @media (max-width: 400px) {
    .rifa-topbar__link {
      padding: 8px 12px;
    }

    .rifa-topbar__container {
      gap: 8px;
    }

    .rifa-topbar__fox {
      height: 80px;
    }

    .rifa-topbar__title {
      font-size: 0.7rem;
    }

    .rifa-topbar__value {
      font-size: 0.6rem;
    }

    .rifa-topbar__formula {
      font-size: 0.5rem;
    }

    .rifa-topbar__btn {
      padding: 6px 10px;
      font-size: 0.55rem;
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "header",
      "content": "Logo Settings"
    },
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo Image",
      "info": "Recommended: PNG or SVG with transparent background"
    },
    {
      "type": "range",
      "id": "logo_width",
      "min": 100,
      "max": 600,
      "step": 20,
      "unit": "px",
      "label": "Logo Width",
      "default": 400
    },
    {
      "type": "header",
      "content": "Navigation"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu",
      "default": "main-menu"
    }
  ]
}
{% endschema %}
